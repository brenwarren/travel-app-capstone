(()=>{"use strict";var e={362:(e,t,n)=>{n.d(t,{w:()=>i});const o="http://api.geonames.org/searchJSON?q=",r="brenwarren",a=async(e,t,n)=>{try{const o=await fetch(`${e}${t}&username=${n}`);if(!o.ok)throw new Error(`HTTP error! Status: ${o.status}`);return await o.json()}catch(e){throw console.error("Error in getCityData:",e),e}},c=async()=>{const e=await fetch("/all");try{const t=await e.json();console.log("Fetched Data from Server:",t),document.getElementById("cityName").innerHTML=`City: ${t.city||"N/A"}`,document.getElementById("travelDate").innerHTML=`Travel Date: ${t.travelDate||"N/A"}`,document.getElementById("country").innerHTML=`Country: ${t.country||"N/A"}`,document.getElementById("longitude").innerHTML=`Longitude: ${t.longitude||"N/A"}`,document.getElementById("latitude").innerHTML=`Latitude: ${t.latitude||"N/A"}`}catch(e){console.log("Error updating UI:",e)}},l=async(e="",t={})=>{const n=await fetch(e,{method:"POST",credentials:"same-origin",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});try{const e=await n.json();return console.log("Data sent to server:",e),e}catch(e){console.log("Error:",e)}};function i(e){const t=document.getElementById("city").value,n=document.getElementById("travelDate").value,i=document.getElementById("feelings").value;/^\d{2}-\d{2}-\d{4}$/.test(n)?(console.log(`City: ${t}, Travel Date: ${n}, Feelings: ${i}`),a(o,t,r).then((function(e){if(e&&e.geonames&&e.geonames.length>0){const{lng:o,lat:r,countryName:a}=e.geonames[0];console.log(`Fetched from API - Longitude: ${o}, Latitude: ${r}, Country: ${a}`);const c={city:t,travelDate:n,feelings:i,longitude:o,latitude:r,country:a};return console.log("Data to be sent to server:",c),l("/add",c)}console.error("No location data found in the API response:",e),alert("Unable to retrieve location data. Please try again.")})).then((()=>{console.log("Data successfully sent to the server."),c()})).catch((function(e){console.error("Error fetching city data:",e.message||e),alert("An error occurred while fetching city data. Please try again.")}))):alert("Please enter a valid date in the format dd-mm-yyyy")}document.getElementById("generate").addEventListener("click",i)}},t={};function n(o){var r=t[o];if(void 0!==r)return r.exports;var a=t[o]={exports:{}};return e[o](a,a.exports,n),a.exports}n.d=(e,t)=>{for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var o=n(362);document.addEventListener("DOMContentLoaded",(()=>{const e=document.getElementById("generate");e?e.addEventListener("click",o.w):console.error("Element with id 'generate' not found.")}))})();